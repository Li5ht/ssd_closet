<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
	namespace="com.example.closet.dao.mybatis.mapper.ProductMapper">
	<cache />

	<insert id="insertAuctionProduct">
		INSERT ALL INTO PRODUCT (PRODUCTID, USERID, CATEGORYID, NAME,
		DESCRIPTION, TYPE,
		STATUS, REGISTERDATE, PERIOD, COLOR, "size",
		PICTURE1, PICTURE2, PICTURE3, PICTURE4)
		VALUES (#{productId}, #{userId},
		#{categoryId}, #{name}, #{description}, #{type},
		#{status},
		#{registerDate}, #{period}, #{color}, #{size},
		#{picture1},
		#{picture2}, #{picture3}, #{picture4})
	    INTO AUCTION
		(PRODUCTID, STARTPRICE, USED)
		VALUES (#{productId}, #{startPrice},
		#{used}})
		SELECT *
		FROM DUAL;
	</insert>

	<insert id="insertGroupBuyProduct">
		INSERT ALL INTO PRODUCT (PRODUCTID, USERID, CATEGORYID, NAME,
		DESCRIPTION, TYPE,
		STATUS, REGISTERDATE, PERIOD, COLOR, "size",
		PICTURE1, PICTURE2, PICTURE3, PICTURE4)
		VALUES (#{productId}, #{userId},
		#{categoryId}, #{name}, #{description}, #{type},
		#{status},
		#{registerDate}, #{period},
		#{color}, #{size}, #{picture1},
		#{picture2},
		#{picture3}, #{picture4})
		INTO GROUPBUY
		(PRODUCTID, PRICE, PEOPLENUM)
		VALUES (#{productId}, #{price}, #{peapleNum})
		SELECT *
        FROM DUAL;
	</insert>

	<update id="updateProduct">
		UPDATE PRODUCT
		SET
		DESCRIPTION = #{description},
		PICTURE1 = #{picture1},
		PICTURE2 = #{picture2},
		PICTURE3 = #{picture3},
		PICTURE4 = #{picture4}
		WHERE
		PRODUCTID = #{productId}
	</update>

	<delete id="deleteProduct">
		DELETE FROM PRODUCT
		WHERE
		PRODUCTID = #{productId}
	</delete>

	<select id="getProductDetail" resultType="Product">
		SELECT
		PRODUCTID,
		NAME,
		description,
		categoryId
		FROM PRODUCT
		WHERE PRODUCTID
		= #{productId}
	</select>

	<select id="getProductList" resultType="Product">
		SELECT
		PRODUCTID,
		NAME,
		description,
		categoryId
		FROM
		PRODUCT
		WHERE STATUS = 1 <!-- 판매 중인 상품 -->
	</select>

	<!-- <select id="searchProductList" resultType="Product"> -->
	<!-- select -->
	<!-- PRODUCTID, -->
	<!-- NAME, -->
	<!-- DESCN as description, -->
	<!-- CATEGORY as categoryId -->
	<!-- from PRODUCT -->
	<!-- WHERE lower(name) like #{value} -->
	<!-- </select> -->

</mapper>